<!-- Medivance EHR Report Template - Visually Stunning Neo-Modern Dark Theme -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Fix typo in viewport meta tag -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AI Summarized Report | Medivance EHR</title>
    <meta name="keywords" content="Medivance, EHR, AI, NLP, Summarization, Healthcare, Report">
    <meta name="description" content="AI-generated, next-level EHR summary report by Medivance.">
    <meta name="author" content="Medivance Team">
    <!-- Google Fonts: Modern, Readable, Bold -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Animate.css for entrance effects -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/reports.css') }}">
    {# Only include custom.css if it exists. If not, comment out or remove to avoid 404 #}
    {# <link rel="stylesheet" href="{{ url_for('static', filename='css/custom.css') }}"> #}
    <link rel="icon" href="{{ url_for('static', filename='images/favicon.png') }}" type="image/png">
    <style>
        :root {
            --primary: #00e6d3;
            --secondary: #1e90ff;
            --accent: #ff5eae;
            --bg-dark: #101624;
            --bg-card: #181f32;
            --bg-navbar: #181f32cc;
            --border-card: #232b3e;
            --text-main: #f4f8fb;
            --text-muted: #a0aec0;
            --shadow: 0 8px 32px 0 rgba(30, 144, 255, 0.18);
            --success: #00e6d3;
            --danger: #ff5eae;
            --glass: rgba(24,31,50,0.85);
            --glass-blur: blur(12px);
        }
        html, body {
            min-height: 100vh;
            font-family: 'Inter', 'Roboto Mono', Arial, sans-serif;
            background: linear-gradient(135deg, #101624 0%, #1e2336 100%);
            color: var(--text-main);
            letter-spacing: 0.01em;
            scroll-behavior: smooth;
        }
        /* Futuristic animated background */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100vw; height: 100vh;
            background: url("{{ url_for('static', filename='images/bg-pattern.svg') }}") repeat, linear-gradient(120deg, #1e2336 0%, #101624 100%);
            opacity: 0.13;
            z-index: 0;
            pointer-events: none;
            animation: bgMove 40s linear infinite alternate;
        }
        @keyframes bgMove {
            0% { background-position: 0 0, 0 0; }
            100% { background-position: 200px 200px, 0 0; }
        }
        /* Navbar */
        .navbar-modern {
            background: var(--bg-navbar) !important;
            box-shadow: 0 2px 24px 0 rgba(30, 144, 255, 0.10);
            border-bottom: 1.5px solid var(--border-card);
            backdrop-filter: var(--glass-blur);
        }
        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        .navbar-brand .medivance-logo {
            height: 44px;
            width: auto;
            max-width: 48px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 12px #00e6d355;
            padding: 2px 4px;
            object-fit: contain;
            /* Ensures logo is visible on dark backgrounds */
        }
        @media (max-width: 767px) {
            .navbar-brand .medivance-logo {
                height: 32px;
                max-width: 36px;
                padding: 1px 2px;
            }
        }
        .navbar-brand .brand-gradient {
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 60%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            font-size: 2.2rem;
            letter-spacing: 1.5px;
            text-shadow: 0 2px 12px #00e6d355;
        }
        .navbar-nav .nav-link {
            color: var(--text-main) !important;
            font-weight: 700;
            font-size: 1.12rem;
            margin-right: 1rem;
            transition: color 0.18s;
            position: relative;
            letter-spacing: 0.04em;
        }
        .navbar-nav .nav-link.active, .navbar-nav .nav-link:hover {
            color: var(--primary) !important;
            text-shadow: 0 2px 8px #00e6d355;
        }
        .navbar-nav .nav-link::after {
            content: '';
            display: block;
            width: 0;
            height: 2.5px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            transition: width 0.2s;
            border-radius: 2px;
            margin-top: 2px;
        }
        .navbar-nav .nav-link:hover::after, .navbar-nav .nav-link.active::after {
            width: 100%;
        }
        /* Hero Section */
        .hero-section {
            position: relative;
            z-index: 2;
            padding-top: 7rem;
            padding-bottom: 2.5rem;
            text-align: center;
        }
        .hero-title {
            font-size: 3.2rem;
            font-weight: 900;
            background: linear-gradient(90deg, var(--primary) 0%, var(--secondary) 60%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
            margin-bottom: 0.7rem;
            display: inline-block;
            animation: fadeInDown 1s;
            text-shadow: 0 4px 24px #00e6d355;
        }
        .hero-title .fa-file-medical {
            color: var(--accent);
            margin-right: 0.7rem;
            filter: drop-shadow(0 2px 8px #ff5eae55);
        }
        .hero-subtitle {
            color: var(--text-muted);
            font-size: 1.25rem;
            margin-bottom: 2.2rem;
            animation: fadeInUp 1.2s;
            text-shadow: 0 1px 8px #232b3e55;
        }
        /* Card Section */
        .glass-card {
            background: var(--glass);
            box-shadow: 0 8px 32px 0 rgba(30, 144, 255, 0.18);
            border-radius: 2rem;
            border: 1.5px solid var(--border-card);
            padding: 2.5rem 2.2rem 2.2rem 2.2rem;
            position: relative;
            z-index: 2;
            transition: box-shadow 0.2s, transform 0.2s;
            backdrop-filter: var(--glass-blur);
            overflow: hidden;
        }
        .glass-card::before {
            content: "";
            position: absolute;
            top: -60px; right: -60px;
            width: 180px; height: 180px;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            opacity: 0.13;
            z-index: 0;
            pointer-events: none;
        }
        .glass-card:hover {
            box-shadow: 0 12px 48px 0 rgba(0,230,211,0.18), 0 2px 24px 0 rgba(30, 144, 255, 0.18);
            transform: translateY(-4px) scale(1.015);
        }
        .summary-heading {
            font-size: 1.35rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 1.1rem;
            letter-spacing: 0.3px;
            display: flex;
            align-items: center;
            gap: 0.7rem;
            text-shadow: 0 2px 8px #00e6d355;
            z-index: 2;
            position: relative;
        }
        .summary-heading .fa-solid {
            color: var(--accent);
            filter: drop-shadow(0 2px 8px #ff5eae55);
        }
        .report-content {
            background: linear-gradient(120deg, #232b3e 0%, #181f32 100%);
            border-radius: 1.2rem;
            font-family: 'Roboto Mono', 'Consolas', monospace;
            font-size: 1.13rem;
            color: var(--text-main);
            padding: 1.5rem 1.3rem;
            margin-bottom: 2.1rem;
            min-height: 180px;
            white-space: pre-wrap;
            word-break: break-word;
            box-shadow: 0 2px 16px 0 rgba(30, 144, 255, 0.10);
            border: 1.5px solid var(--border-card);
            position: relative;
            overflow: auto;
            transition: box-shadow 0.2s;
            z-index: 2;
        }
        .report-content::after {
            content: '';
            position: absolute;
            right: 18px; bottom: 18px;
            width: 38px; height: 38px;
            background: url('{{ url_for('static', filename='images/ai-chip.svg') }}') no-repeat center/contain;
            opacity: 0.13;
            pointer-events: none;
        }
        /* Sentiment Analysis Card */
        .sentiment-analysis {
            display: flex;
            gap: 2.5rem;
            flex-wrap: wrap;
            align-items: center;
            background: linear-gradient(90deg, #1e2336 0%, #232b3e 100%);
            border-radius: 1rem;
            padding: 1.2rem 1.5rem;
            margin-bottom: 2.1rem;
            box-shadow: 0 2px 16px 0 rgba(0,230,211,0.10);
            border: 1.5px solid var(--primary);
            color: var(--text-main);
            font-size: 1.13rem;
            position: relative;
            overflow: hidden;
            z-index: 2;
        }
        .sentiment-label {
            font-weight: 800;
            color: var(--success);
            font-size: 1.18rem;
            letter-spacing: 0.2px;
            text-shadow: 0 2px 8px #00e6d355;
        }
        .sentiment-score {
            font-weight: 800;
            color: var(--accent);
            font-size: 1.18rem;
            letter-spacing: 0.2px;
            text-shadow: 0 2px 8px #ff5eae55;
        }
        .sentiment-analysis .text-muted {
            color: #7f8fa6 !important;
            font-weight: 600;
        }
        /* Action Buttons */
        .action-buttons .btn {
            min-width: 160px;
            margin: 0.5rem 0.7rem 0 0;
            font-size: 1.13rem;
            font-weight: 800;
            border-radius: 12px;
            box-shadow: 0 2px 16px 0 rgba(30, 144, 255, 0.10);
            border: none;
            letter-spacing: 0.04em;
            transition: transform 0.16s, box-shadow 0.16s, background 0.18s;
            position: relative;
            overflow: hidden;
        }
        .btn-gradient {
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
            color: #fff !important;
            border: none;
            box-shadow: 0 2px 16px 0 rgba(0,230,211,0.13);
        }
        .btn-gradient:hover, .btn-gradient:focus {
            background: linear-gradient(90deg, var(--accent) 0%, var(--primary) 100%);
            color: #fff !important;
            box-shadow: 0 6px 24px 0 rgba(255,94,174,0.18);
            transform: translateY(-2px) scale(1.05);
        }
        .btn-outline-secondary, .btn-outline-primary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary) !important;
        }
        .btn-outline-secondary:hover, .btn-outline-primary:hover {
            background: var(--primary);
            color: #fff !important;
            border-color: var(--primary);
            box-shadow: 0 2px 16px 0 rgba(0,230,211,0.13);
        }
        .action-buttons .btn:active {
            transform: scale(0.98);
        }
        /* Data Security Note */
        .data-security {
            font-size: 1.02rem;
            color: var(--text-muted);
            margin-top: 1.7rem;
            background: linear-gradient(90deg, #232b3e 0%, #181f32 100%);
            border-radius: 10px;
            padding: 0.7rem 1.2rem;
            display: inline-block;
            box-shadow: 0 2px 16px 0 rgba(30, 144, 255, 0.08);
            border: 1.5px solid var(--primary);
            font-weight: 600;
        }
        .data-security .fa-lock {
            color: var(--success);
            margin-right: 0.4em;
            filter: drop-shadow(0 2px 8px #00e6d355);
        }
        .data-security span[style] {
            color: var(--primary) !important;
            font-weight: 900 !important;
            text-shadow: 0 2px 8px #00e6d355;
        }
        /* Footer */
        .footer_section {
            background: linear-gradient(90deg, #181f32 0%, #232b3e 100%);
            border-top-left-radius: 32px 16px;
            border-top-right-radius: 32px 16px;
            color: var(--text-main);
            box-shadow: 0 -2px 24px 0 rgba(30, 144, 255, 0.10);
            margin-top: 4rem;
            border-top: 2px solid var(--primary);
        }
        .footer-link {
            color: var(--primary);
            opacity: 0.92;
            transition: color 0.15s, opacity 0.15s;
            font-weight: 700;
            letter-spacing: 0.03em;
        }
        .footer-link:hover {
            color: var(--accent);
            opacity: 1;
            text-decoration: underline;
            text-shadow: 0 2px 8px #ff5eae55;
        }
        .footer_section h5 {
            color: var(--primary);
            text-shadow: 0 2px 8px #00e6d355;
            font-weight: 900;
        }
        .footer_section .text-muted, .footer_section .small {
            color: var(--text-muted) !important;
            opacity: 0.9;
        }
        .footer_section .img-fluid {
            box-shadow: 0 2px 16px 0 rgba(30, 144, 255, 0.10);
            border: 2px solid var(--primary);
        }
        /* Responsive */
        @media (max-width: 991px) {
            .glass-card { padding: 1.2rem 0.7rem; }
            .hero-title { font-size: 2.1rem; }
        }
        @media (max-width: 767px) {
            .glass-card { padding: 1rem 0.5rem; }
            .hero-title { font-size: 1.3rem; }
            .navbar-brand .brand-gradient { font-size: 1.3rem; }
            .summary-heading { font-size: 1.05rem; }
            .report-content { font-size: 0.98rem; }
            .sentiment-analysis { font-size: 0.98rem; }
        }
        /* Custom Animations */
        @keyframes fadeInDown {
            0% { opacity: 0; transform: translateY(-40px);}
            100% { opacity: 1; transform: translateY(0);}
        }
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(40px);}
            100% { opacity: 1; transform: translateY(0);}
        }
    </style>
</head>
<body>
    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top navbar-modern animate__animated animate__fadeInDown">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center gap-2" href="{{ url_for('main.index') }}">
                <!-- Updated logo: use medivance_logo.png, styled for visibility and coordination -->
                <img src="{{ url_for('static', filename='images/medivance_logo.png') }}" alt="Medivance Logo" class="medivance-logo">
                <span class="brand-gradient">Medivance</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNavbar" aria-controls="mainNavbar" aria-expanded="false" aria-label="Toggle navigation">
                <span class="fa fa-bars"></span>
            </button>
            <div class="collapse navbar-collapse" id="mainNavbar">
                <ul class="navbar-nav ms-auto align-items-center">
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'main.index' %}active{% endif %}" href="{{ url_for('main.index') }}">Home</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'main.summerize' %}active{% endif %}" href="{{ url_for('main.summerize') }}">Summarize</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'main.about' %}active{% endif %}" href="{{ url_for('main.about') }}">About</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'main.doctors' %}active{% endif %}" href="{{ url_for('main.doctors') }}">Doctors</a></li>
                    <li class="nav-item"><a class="nav-link {% if request.endpoint == 'main.news' %}active{% endif %}" href="{{ url_for('main.news') }}">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="fa fa-user"></i> Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="#"><i class="fa fa-search"></i></a></li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Navbar End -->

    <!-- Hero/Title Section -->
    <section class="hero-section">
        <div class="container">
            <h1 class="hero-title animate__animated animate__fadeInDown">
                <i class="fa-solid fa-file-medical"></i>AI Summarized EHR Report
            </h1>
            <p class="hero-subtitle animate__animated animate__fadeInUp animate__delay-1s">
                Your AI-powered, professional summaryâ€”crafted for clarity, insight, and action.
            </p>
        </div>
    </section>

    <!-- Report Card Section -->
    <section class="pb-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-9 col-md-11">
                    <div class="glass-card animate__animated animate__fadeInUp" data-aos="fade-up">
                        <!-- Report Content -->
                        <h2 class="summary-heading"><i class="fa-solid fa-magic"></i>Generated Report</h2>
                        <div class="report-content">
                            {{ report if report else "No structured report available." }}
                        </div>
                        <!-- Sentiment Analysis -->
                        <h2 class="summary-heading"><i class="fa-solid fa-heart-pulse"></i>Sentiment Analysis</h2>
                        <div class="sentiment-analysis">
                            <div>
                                <span class="text-muted"><i class="fa fa-tag me-1"></i>Label:</span>
                                <span class="sentiment-label">{{ sentiment_label }}</span>
                            </div>
                            <div>
                                <span class="text-muted"><i class="fa fa-percentage me-1"></i>Confidence:</span>
                                <span class="sentiment-score">{{ sentiment_score }}</span>
                            </div>
                        </div>
                        <!-- Action Buttons -->
                        <div class="action-buttons mt-4 text-center">
                            <a href="{{ url_for('main.download_report', filename=report_filename) }}" class="btn btn-gradient btn-lg me-2 animate__animated animate__pulse animate__infinite">
                                <i class="fa fa-download me-1"></i> Download PDF
                            </a>
                            <a href="{{ url_for('main.summerize') }}" class="btn btn-outline-secondary btn-lg me-2">
                                <i class="fa fa-arrow-left me-1"></i> Back to Summarize
                            </a>
                            <a href="{{ url_for('main.index') }}" class="btn btn-outline-primary btn-lg">
                                <i class="fa fa-home me-1"></i> Home
                            </a>
                        </div>
                        <div class="text-center" data-aos="fade-up" data-aos-delay="200">
                            <span class="data-security">
                                <i class="fa fa-lock"></i> Your data is <span style="color:var(--primary);font-weight:700;">secure</span> and never stored.
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Section Start -->
    <footer class="footer_section py-5">
        <div class="container">
            <div class="row gy-4">
                <div class="col-lg-3 col-sm-6">
                    <h5 class="fw-bold mb-3"><i class="fa fa-link me-2"></i>Resources</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link">What we do</a></li>
                        <li><a href="#" class="footer-link">Media</a></li>
                        <li><a href="#" class="footer-link">Travel Advice</a></li>
                        <li><a href="#" class="footer-link">Protection</a></li>
                        <li><a href="#" class="footer-link">Care</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <h5 class="fw-bold mb-3"><i class="fa fa-info-circle me-2"></i>About</h5>
                    <p class="text-muted small">Medivance is an innovative AI-powered platform transforming how healthcare professionals interact with EHRs and medical data.</p>
                </div>
                <div class="col-lg-3 col-sm-6">
                    <h5 class="fw-bold mb-3"><i class="fa fa-envelope me-2"></i>Contact Us</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="footer-link"><i class="fa fa-map-marker-alt me-2"></i>Location</a></li>
                        <li><a href="#" class="footer-link"><i class="fa fa-phone-alt me-2"></i>+01 1234567890</a></li>
                        <li><a href="#" class="footer-link"><i class="fa fa-envelope me-2"></i>demo@gmail.com</a></li>
                    </ul>
                </div>
                <div class="col-lg-3 col-sm-6 text-center">
                    <h5 class="fw-bold mb-3"><i class="fa fa-globe me-2"></i>Countries</h5>
                    <img src="{{ url_for('static', filename='images/map-bg.png') }}" alt="Map" class="img-fluid rounded shadow-sm" style="max-width: 120px;">
                </div>
            </div>
            <div class="text-center mt-4 text-muted small">
                &copy; {{ 2024 }} Medivance EHR Summarizer. All rights reserved.
            </div>
        </div>
    </footer>
    <!-- Footer Section End -->

    <!-- JavaScript Files -->
    <script src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
    {# Remove custom.js if it contains errors from missing plugins #}
    {# <script src="{{ url_for('static', filename='js/custom.js') }}"></script> #}
    <!-- Hamburger menu fix for mobile view -->
    <script>
        // Remove any jQuery plugin code that depends on missing plugins (niceScroll, meanmenu, sticky)
        // Fix for hamburger menu toggle on mobile devices using only Bootstrap 5

        document.addEventListener('DOMContentLoaded', function () {
            var navbarToggler = document.querySelector('.navbar-toggler');
            var navbarCollapse = document.getElementById('mainNavbar');

            // Ensure toggler toggles the menu on click (Bootstrap 5 handles this natively)
            if (navbarToggler && navbarCollapse) {
                navbarToggler.addEventListener('click', function () {
                    setTimeout(function() {
                        var isShown = navbarCollapse.classList.contains('show');
                        navbarToggler.setAttribute('aria-expanded', isShown ? 'true' : 'false');
                    }, 200);
                });

                // Close navbar when a nav-link is clicked (for mobile)
                var navLinks = navbarCollapse.querySelectorAll('.nav-link');
                navLinks.forEach(function(link) {
                    link.addEventListener('click', function() {
                        if (window.innerWidth < 992 && navbarCollapse.classList.contains('show')) {
                            // Use Bootstrap 5's Collapse API
                            if (typeof bootstrap !== 'undefined' && bootstrap.Collapse) {
                                var bsCollapse = bootstrap.Collapse.getOrCreateInstance(navbarCollapse);
                                bsCollapse.hide();
                            } else {
                                navbarCollapse.classList.remove('show');
                            }
                            navbarToggler.setAttribute('aria-expanded', 'false');
                        }
                    });
                });
            }
        });
    </script>
</body>
</html>